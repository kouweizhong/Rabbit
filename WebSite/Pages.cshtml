@using System.Dynamic;
@{  
    Layout = SiteEngine.RunHook("get_layout");
    var ct = SiteEngine.RunHook("get_pages_pageController", new PageController());
    
    Mvc.Run(this, ct);

    //Assert.IsTrue(Page.View != null, "View has not been set.");
    //Assert.IsTrue(Page.Model != null, "Model has not been set.");

    if (Page.Model is ExpandoObject && ((ExpandoObject)Page.Model).HasProperty("Title"))
    {
        Page.Title = Page.Model.Title;
    }
}

@if (Page.View != null)
{
    @RenderPage(Page.View, Page.Model)
}