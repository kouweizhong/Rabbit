@using Rabbit;
@{  
    Layout = "~/_SiteLayout.cshtml";
    Rabbit.Mvc.Run(this);
    
}

@functions {
    string name = ""; //view state
    
    [Get("/")]
    void Get()
    {
    }

    [Post("/Save")]
    void Save(string name) // match html input
    {
        this.name = name;
    }
}

<h2>Rabbit MVC Sample</h2>
<br />

<form method="post" action="Sample_Mvc/Save">
    Enter something: <input type="text" name="name" value="@name"/><br /><br />

    <button id="button" value="test">Run MVC</button>

</form>
<br />

<div id="msg">@name</div>

@if (IsPost)
{ 
    <text>   
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen">  
    <script type="text/javascript" src="http://code.jquery.com/qunit/git/qunit.js"></script>  
    
    <h2>Test Results</h2>
    <div id="qunit-testrunner-toolbar"></div>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture"></div>

    <script type="text/javascript">
        $(function () {
            test("verify result after post", function () {
                var v1 = $("#msg").text();
                var v2 = $("input[name='name']").val();
                equals(v1, v2);
            });
        });
    </script> 
    </text>   
}